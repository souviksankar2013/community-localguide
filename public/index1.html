<!DOCTYPE html>
<html>
  <head>
    <title>Image Viewer using Voice</title>
    <!-- <link rel="stylesheet" href="static/leaflet/leaflet.css"/> 

        <script src="static/leaflet/leaflet.js"></script> -->
        <link rel="stylesheet" href="https://js.arcgis.com/4.23/esri/themes/light/main.css" />
        <script src="https://js.arcgis.com/4.23/"></script>     

  </head>
  <!-- <div style="text-align: center;">
    <h2>Image Viewer using Voice</h2>
    <p>
      <button type="button" id="record">start</button>
      <button type="button" id="stopRecord" disabled>stop</button>
      <input type="button" id="sendRecord" value="submit">
    </p>
    <p>
     
      <h2 id="text"></h2>
    </p>
  </div> -->
  <div id="map" style="height: 86%;left:0;width:100%;position:absolute;float:left"></div>

<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script>
  require([
     "esri/config",
      "esri/Map",
      "esri/views/MapView",
      "esri/widgets/Locate"
    ], function (esriConfig,Map, MapView,Locate) {

      esriConfig.apiKey = "AAPK4be3139cfd88419088a08374a61f706460N6EVB9btb-aNSXtpccuNhPt7-wNqdYkY2jMG43ic_VetbNe0MWF8Vtmrnp-44r";
      const map = new Map({
        // basemap: "hybrid" // Basemap layer
        basemap: "osm" // Basemap layer
      });

      const view = new MapView({
        map: map,
        center: [-118.805, 34.027],
        zoom: 13, // scale: 72223.819286
        container: "map",
        constraints: {
          snapToZoom: false
        }
    })

    const locate = new Locate({
          view: view,
          useHeadingEnabled: false,
          goToOverride: function(view, options) {
            options.target.scale = 1500;
            return view.goTo(options.target);
          }
        });
        view.ui.add(locate, "top-left");
  });


// function getLocation() {
//   if (navigator.geolocation) {
//     navigator.geolocation.getCurrentPosition(showPosition);

//   } else { 
//     x.innerHTML = "Geolocation is not supported by this browser.";
//   }
// }



// function showPosition(position) {
//   // x.innerHTML = "Latitude: " + position.coords.latitude + 
//   // "<br>Longitude: " + position.coords.longitude;
  
  
//   var map = L.map('map', {
//     center: [position.coords.latitude,position.coords.longitude],
//     zoom: 12,
//     layers: [osm]
// });


// var baseMaps = {
    
//     "Google": osm,

// };

// layerControl = L.control.layers(baseMaps).addTo(map);
// var marker = L.marker([position.coords.latitude,position.coords.longitude]).addTo(map);
// }

// function positionloop(position)
// {
//   //L.marker([position.coords.latitude,position.coords.longitude]).addTo(map);
//   console.log(position.coords.latitude.toString()+'_'+position.coords.longitude)

// }



// getLocation()
// setInterval(
// function()
// {
//   if (navigator.geolocation) {
//     navigator.geolocation.getCurrentPosition(positionloop);
//     // navigator.geolocation.getCurrentPosition(positionloop);

//   } else { 
//     x.innerHTML = "Geolocation is not supported by this browser.";
//   }

// }, 1000)


//   var osm = L.tileLayer('http://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z} ', {
//     attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">Google Maps</a> contributors'
// })




  </script>

  <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCbdMJwA7d1zME7QLvTnyujSvtmds_NhWw",
    authDomain: "intra-hospital-navigation.firebaseapp.com",
    projectId: "intra-hospital-navigation",
    storageBucket: "intra-hospital-navigation.appspot.com",
    messagingSenderId: "648205527303",
    appId: "1:648205527303:web:85ad4545940a0f794afda2",
    measurementId: "G-GH1M4HSF0H"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>

</html>